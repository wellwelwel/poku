---
title: Promises
tags: [examples, promise, beforeAll, afterAll, tutorial, roadmap]
sidebar_position: 0
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import MidLevel from '@site/static/img/mid-level.svg';

# Promises

O uso da [sintaxe nativa **JavaScript** nos testes](/docs/philosophy#essÃªncia-do-javascript-para-testes-) Ã© uma das principais diferenÃ§as entre o **Poku** e outros executores de testes, o que possibilita seu uso em vÃ¡rias plataformas.

:::tip
NÃ£o Ã© necessÃ¡rio usar `await` para testes que nÃ£o sÃ£o assÃ­ncronos.
:::

Aqui estÃ£o alguns exemplos de testes sequenciais e concorrentes no mesmo arquivo, alÃ©m de como realizar uma aÃ§Ã£o apÃ³s todos os testes terem sido concluÃ­dos:

### Executando testes assÃ­ncronos no mesmo arquivo em paralelo

```js
import { test, assert, sleep } from 'poku';

test(async () => {
  const atual = 1;
  const esperado = 1;

  await sleep(2000);

  assert.strictEqual(atual, esperado);
});

test(async () => {
  const atual = 2;
  const esperado = 2;

  await sleep(1000);

  assert.strictEqual(atual, esperado);
});
```

<hr />

### Executando testes assÃ­ncronos no mesmo arquivo sequencialmente (aguardando nÃ­vel superior)

```js
import { test, assert, sleep } from 'poku';

await test(async () => {
  const atual = 1;
  const esperado = 1;

  await sleep(2000);

  assert.strictEqual(atual, esperado);
});

await test(async () => {
  const atual = 2;
  const esperado = 2;

  await sleep(1000);

  assert.strictEqual(atual, esperado);
});
```

<hr />

### Executando testes assÃ­ncronos no mesmo arquivo sequencialmente

```js
import { describe, it, assert, sleep } from 'poku';

describe(async () => {
  await it(async () => {
    const atual = 1;
    const esperado = 1;

    await sleep(2000);

    assert.strictEqual(atual, esperado);
  });

  await it(async () => {
    const atual = 2;
    const esperado = 2;

    await sleep(1000);

    assert.strictEqual(atual, esperado);
  });
});
```

<hr />

## Aguarando todos os testes serem executados para realizar uma aÃ§Ã£o posterior

```js
import { describe, it, assert, sleep } from 'poku';

describe(async () => {
  console.log('Imprimindo isso antes de todos os testes ğŸƒğŸ»â€â™€ï¸');

  await Promise.all([
    test(async () => {
      const atual = 1;
      const esperado = 1;

      await sleep(2000);

      assert.strictEqual(atual, esperado);
    }),

    test(async () => {
      const atual = 2;
      const esperado = 2;

      await sleep(1000);

      assert.strictEqual(atual, esperado);
    }),
  ]);

  console.log('Imprimindo isso depois de todos os testes ğŸ˜´');
});
```

:::tip
Para mÃºltiplos `describe` ou `test` assÃ­ncronos, vocÃª tambÃ©m pode usar `await` para executÃ¡-los sequencialmente.
:::

<hr />

:::danger Be careful
Ao usar `beforeEach` and `afterEach` assÃ­ncronos, Ã© necessÃ¡rio usar `await` mesmo que os auxiliares `test` ou `it` nÃ£o tenham eventos assÃ­ncronos.
:::

:::note
Se vocÃª encontrar algum erro de digitaÃ§Ã£o, sinta-se Ã  vontande para abrir um **Pull Request** corrigindo-o.
:::

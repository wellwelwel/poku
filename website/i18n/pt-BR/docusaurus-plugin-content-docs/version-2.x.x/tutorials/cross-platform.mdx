---
title: üë©üèº‚ÄçüöÄ Testando em Diferentes Plataformas
description: Executando a mesma su√≠te de testes em diferentes plataformas.
tags: [cross-platform, Node.js, Bun, Deno, tutorial, roadmap]
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Maintainer from '@site/static/img/maintainer.svg';

<div className='title-section'>
<aside>

# üë©üèº‚ÄçüöÄ Testando em Diferentes Plataformas

- Executando a mesma su√≠te de testes em diferentes plataformas.

</aside>
  <aside>
    <Maintainer className='logo' height='128' />
  </aside>
</div>

<hr />

## Executando testes em plataformas espec√≠ficas

Primeiro, vamos entender o que cada defini√ß√£o faz:

```sh
npx poku
```

- Tenta identificar a plataforma ou execut√°-la no **Node.js** por padr√£o.

```sh
npx poku --node
```

- Chama o **Poku** atrav√©s do **Node.js** e executa todos os testes usando o **Node.js**.

```sh
npx poku --bun
```

- Chama o **Poku** atrav√©s do **Node.js**, mas executa todos os testes usando o **Bun**.

```sh
npx poku --deno
```

- Chama o **Poku** atrav√©s do **Node.js**, mas executa todos os testes usando o **Deno**.

:::note
√â importante notar que o tempo de execu√ß√£o do **Poku** √© diferente do tempo de execu√ß√£o dos testes (`node`, `npx tsx`, `bun`, ou `deno`).
:::

<hr />

- Veja a se√ß√£o `platform` [aqui](/docs/documentation/poku/options/platform).
- Veja todas as flags e op√ß√µes dispon√≠veis para o comando `poku` [aqui](/docs/category/-poku).

<hr />

### Recomenda√ß√µes {#recommendations}

Para evitar conflitos em ambientes com m√∫ltiplas plataformas instaladas (**Node.js** + **Bun**, **Deno** + **Bun**. etc.), veja os exemplos a seguir:

```sh
npx poku --node
```

- Executa o **Poku** atrav√©s do **Node.js** e garante que todos os testes sejam executados com **Node.js** (ou **tsx** para testes com **TypeScript**).

```sh
bunx poku --bun
```

- Executa o **Poku** atrav√©s do **Bun** e garante que todos os testes sejam executados com **Bun**.

```sh
deno run npm:poku --deno
```

- Executa o **Poku** atrav√©s do **Deno** e garante que todos os testes sejam executados com **Deno**.

:::tip
Para usu√°rios de **TypeScript**, n√£o √© necess√°rio instalar **tsx** para o **Bun** e o **Deno**, pois ambos executam **TypeScript** nativamente.
:::

<hr />

### Executando CommonJS com Deno

> Veja todas as op√ß√µes para o **Deno** [aqui](/docs/documentation/poku/options/deno).

#### Todos os arquivos como CommonJS

```sh
deno run npm:poku --deno --denoCjs
```

#### Uma extens√£o espec√≠fica como CommonJS

```sh
deno run npm:poku --deno --denoCjs='.cjs'
```

#### M√∫ltiplas extens√µes como CommonJS

```sh
deno run npm:poku --deno --denoCjs='.cjs,.js'
```

<hr />

## Usando a API do Poku _(conceito avan√ßado)_

Na descri√ß√£o do **Poku**, voc√™ pode ler _"O Poku facilita os testes para Node.js, Bun, Deno, e voc√™ <u>ao mesmo tempo</u>."_, e √© verdade:

> Isso √© mais para demonstrar um ponto, n√£o uma recomenda√ß√£o üôãüèª‚Äç‚ôÇÔ∏è

_./test/run.test.ts_:

```ts
import { describe, it, poku, exit } from 'poku';

const parallel = true;
const noExit = true;

const codes: (0 | 1)[] = [];

await describe('Executando Testes em Diferentes Plataformas ao Mesmo Tempo', async () => {
  await Promise.all([
    it('Su√≠te de teste deve passar no Node.js', async () => {
      const exitCode = await poku(['./test/unit'], {
        platform: 'node',
        parallel,
        noExit,
      });

      codes.push(exitCode);
    }),

    it('Su√≠te de teste deve passar no Bun', async () => {
      const exitCode = await poku(['./test/unit'], {
        platform: 'bun',
        parallel,
        noExit,
      });

      codes.push(exitCode);
    }),

    it('Su√≠te de teste deve passar no Deno', async () => {
      const exitCode = await poku(['./test/unit'], {
        platform: 'deno',
        parallel,
        noExit,
        deno: {
          cjs: ['.cjs'],
        },
      });

      codes.push(exitCode);
    }),
  ]);
});

const code = codes.every((code) => code === 0) ? 0 : 1;

exit(code);
```

Ent√£o, escolha uma plataforma:

- **Node.js** (usando **TypeScript**)

```sh
npx tsx test/run.test.ts
```

- **Bun**

```sh
bun test/run.test.ts
```

- **Deno**

```sh
deno run test/run.test.ts
```

:::tip
Geralmente √© ben√©fico ter um _CI_ exclusivo para cada plataforma, especialmente para garantir um melhor controle em casos de erro.
:::

<hr />

:::note
Se voc√™ encontrar algum erro de digita√ß√£o, sinta-se √† vontade para abrir um **Pull Request** corrigindo-o.
:::

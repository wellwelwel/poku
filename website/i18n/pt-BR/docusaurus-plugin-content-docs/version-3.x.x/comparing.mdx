---
tags: [Jest, Mocha, Chai, Vitest, AVA, TypeScript]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Comparando executores de testes

| Executor de Teste    | Isolamento | CJS          | ESM            | node_modules        | Tamanho                                                                                           | Bun | Deno |
| -------------------- | ---------- | ------------ | -------------- | ------------------- | ------------------------------------------------------------------------------------------------- | --- | ---- |
| üê∑ **Poku**          | ‚úÖ         | ‚úÖ           | ‚úÖ             | 1 pacote (**poku**) | [![Install Size](https://packagephobia.com/badge?p=poku)](https://pkg-size.dev/poku)              | ‚úÖ  | ‚úÖ   |
| **Jest** _(30.0.5)_  | ‚úÖ         | ‚úÖ           | _experimental_ | 296 pacotes         | [![Install Size](https://pkg-size.dev/badge/install/27703218)](https://pkg-size.dev/jest@30.0.5)  | ‚ùì  | ‚ùì   |
| **Mocha** _(11.7.1)_ | ‚ùå         | ‚úÖ           | ‚úÖ             | 91 pacotes          | [![Install Size](https://pkg-size.dev/badge/install/8841701)](https://pkg-size.dev/mocha@11.7.1)  | ‚ùì  | ‚ùì   |
| **Vitest** _(3.2.4)_ | ‚úÖ         | _depreciado_ | ‚úÖ             | 49 pacotes          | [![Install Size](https://pkg-size.dev/badge/install/34561544)](https://pkg-size.dev/vitest@3.2.4) | ‚ùì  | ‚ùì   |

<hr />

## Compara√ß√µes R√°pidas

### Desempenho

O **Poku** √© [continuamente testado](https://github.com/wellwelwel/poku/blob/main/.github/workflows/ci_benchmark.yml) para garantir as seguintes expectativas para o uso b√°sico:

- ~**4x** mais r√°pido que o [**Jest**](https://github.com/jestjs/jest) (v30.0.5)
- ~**5x** mais r√°pido que o [**Vitest**](https://github.com/vitest-dev/vitest) (v3.2.4)
- ~**1x** _mais r√°pido_ que o [**Mocha**](https://github.com/mochajs/mocha) (v11.7.1) ‚Äî _mesmo com isolamento por arquivos de teste_ üöÄ

Todas as compara√ß√µes s√£o arredondadas para baixo (por exemplo, `4.99` seria arredondado para `~4x`).

> Voc√™ pode ver como os testes s√£o executados e comparados no diret√≥rio [benchmark](https://github.com/wellwelwel/poku/tree/main/benchmark).
>
> - [Comparando **Poku** e executores de teste nativos _(discuss√£o)_](https://github.com/wellwelwel/poku/discussions/740).

<hr />

### Tamanho da Instala√ß√£o

[![Install Size](https://packagephobia.com/badge?p=poku)](https://pkg-size.dev/poku)

- [~**206x** mais leve que o **Vitest**](https://pkg-size.dev/vitest@3.2.4)
- [~**165x** mais leve que o **Jest**](https://pkg-size.dev/jest@30.0.5)
- [~**52x** mais leve que o **Mocha**](https://pkg-size.dev/mocha@11.7.1)

<hr />

## Compara√ß√£o com TypeScript

**Compara√ß√£o usando **TypeScript** (_sem compila√ß√£o_) e **ESM** para mostrar um teste de erro simples:**

- Vamos come√ßar a partir da instala√ß√£o üî¨

<Tabs>
  <TabItem default value='Poku'>

## [Poku](https://github.com/wellwelwel/poku)

### Instala√ß√£o

```bash
npm i -D poku tsx
```

<a href='https://pkg-size.dev/poku tsx'>
  <img
    src='https://pkg-size.dev/badge/install/22162793'
    title='Tamanho da instala√ß√£o para tsx e poku'
  />
</a>

<hr />

### Criando o arquivo de teste

> _test/index.test.ts_

```ts
import { assert } from 'poku';

assert.deepStrictEqual('1', 1, 'N√∫mero n√£o pode ser um texto');
```

<hr />

### Executando os testes

```bash
npx poku
```

<hr />

Isso √© tudo üéâ

:::tip

Para testes simples, o **Poku** n√£o precisa usar **`test`**, **`describe`** ou **`it`**, pois a mensagem j√° est√° no **`assert`**.

- O **`assert`** do **Poku** √© apenas uma abstra√ß√£o do **`assert`** original do **Node.js**. <br />
- Isso significa: <ins>**Nenhum novo aprendizado √© necess√°rio**</ins> üéâ

:::

Adote um Poku para voc√™ ü©µ

  </TabItem>
  <TabItem value='Jest'>

## [Jest](https://github.com/jestjs/jest)

### Instala√ß√£o

```bash
npm i -D jest @types/jest ts-jest
```

<a href='https://pkg-size.dev/jest @types/jest ts-jest'>
  <img
    src='https://pkg-size.dev/badge/install/56409485'
    title='Tamanho da instala√ß√£o para o ts-jest, @types/jest, e jest'
  />
</a>

<hr />

### Configurando o TypeScript

> Adicione no seu _tsconfig.json_

```json
{
  "compilerOptions": {
    "esModuleInterop": true
  }
}
```

<hr />

### Configurando o Jest

> _jest.config.js_

```js
export default {
  preset: 'ts-jest',
  testEnvironment: 'node',
  testMatch: ['**/test/**/*.test.ts'],
};
```

<hr />

### Criando o arquivo de teste

> _test/index.test.ts_

```ts
describe('Compara√ß√£o de tipos', () => {
  test('N√∫mero n√£o pode ser um texto', () => {
    expect('1').toStrictEqual(1);
  });
});
```

<hr />

### Executando os testes

```bash
npx jest
```

  </TabItem>
  <TabItem value='Mocha + Chai'>

## [Mocha](https://github.com/mochajs/mocha) + [Chai](https://github.com/chaijs/chai)

### Instala√ß√£o

```bash
npm i -D mocha @types/mocha chai @types/chai ts-node
```

<a href='https://pkg-size.dev/mocha @types/mocha chai @types/chai ts-node'>
  <img
    src='https://pkg-size.dev/badge/install/44192453'
    title='Tamanho da instala√ß√£o para o mocha, ts-node, chai, @types/mocha, e @types/chai'
  />
</a>

<hr />

### Configurando o ts-node

> _ts-loader.js_

```js
import { register } from 'node:module';
import { pathToFileURL } from 'node:url';

register('ts-node/esm', pathToFileURL('./'));
```

### Configurando o Mocha

> _.mocharc.json_

```json
{
  "spec": "./test/**/*.test.ts",
  "require": "ts-loader.js"
}
```

<hr />

### Criando um arquivo de teste

> _test/index.test.ts_

```ts
import { expect } from 'chai';

describe('Compara√ß√£o de tipos', () => {
  it('N√∫mero n√£o pode ser um texto', () => {
    expect('1').to.deep.equal(1);
  });
});
```

<hr />

### Executando os testes

```bash
npx mocha
```

  </TabItem>
  <TabItem value='Vitest'>

## [Vitest](https://github.com/vitest-dev/vitest)

### Instala√ß√£o

```bash
npm i -D vitest ts-node
```

<a href='https://pkg-size.dev/vitest ts-node'>
  <img
    src='https://pkg-size.dev/badge/install/75811670'
    title='Tamanho da instala√ß√£o para o vitest e o ts-node'
  />
</a>

<hr />

### Configurando o Vitest

> _vitest.config.ts_

```ts
import { defineConfig } from 'vitest/config';

export default defineConfig({
  test: {
    include: ['test/**/*.test.ts'],
    globals: true,
    environment: 'node',
  },
});
```

<hr />

### Criando um arquivo de teste

> _test/index.test.ts_

```ts
import { describe, it, expect } from 'vitest';

describe('Compara√ß√£o de tipos', () => {
  it('N√∫mero n√£o pode ser um texto', () => {
    expect('1').toStrictEqual(1);
  });
});
```

<hr />

### Executando os testes

```bash
npx vitest run
```

  </TabItem>
  <TabItem value='AVA'>

## [AVA](https://github.com/avajs/ava)

### Instala√ß√£o

```bash
npm i -D ava tsimp
```

<a href='https://pkg-size.dev/ava tsimp'>
  <img
    src='https://pkg-size.dev/badge/install/45894421'
    title='Tamanho da instala√ß√£o para o tsimp e o ava'
  />
</a>

<hr />

### Configurando o Git

> Inclua no _.gitignore_:

```json
/.tsimp
```

<hr />

### Configurando o AVA

> Inclua no _package.json_:

```json
{
  "ava": {
    "files": ["test/**/*.test.ts"],
    "extensions": {
      "ts": "module"
    },
    "nodeArguments": ["--import=tsimp"]
  }
}
```

<hr />

### Criando o arquivo de teste

> _test/index.test.ts_

```ts
import test from 'ava';

test('N√∫mero n√£o pode ser um texto', (t) => {
  t.deepEqual('1', 1);
});
```

<hr />

### Executando os testes

```bash
npx ava
```

  </TabItem>
</Tabs>

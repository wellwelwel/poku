---
tags: [examples, promise, beforeAll, afterAll, tutorial, roadmap]
sidebar_position: 0
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import MidLevel from '@site/static/img/mid-level.svg';

# Promesas

O uso da [sintaxe nativa **JavaScript** nos testes](/docs/3.x.x/philosophy#javascript-essence-for-tests-) √© uma das principais diferen√ßas entre o **Poku** e outros executores de testes, o que possibilita seu uso em v√°rias plataformas.

:::tip
N√£o √© necess√°rio usar `await` para testes que n√£o s√£o ass√≠ncronos.
:::

Aqui est√£o alguns exemplos de testes sequenciais e concorrentes no mesmo arquivo, al√©m de como realizar uma a√ß√£o ap√≥s todos os testes terem sido conclu√≠dos:

### Executando testes ass√≠ncronos no mesmo arquivo em paralelo

```js
import { test, assert, sleep } from 'poku';

test(async () => {
  const atual = 1;
  const esperado = 1;

  await sleep(2000);

  assert.strictEqual(atual, esperado);
});

test(async () => {
  const atual = 2;
  const esperado = 2;

  await sleep(1000);

  assert.strictEqual(atual, esperado);
});
```

<hr />

### Executando testes ass√≠ncronos no mesmo arquivo sequencialmente (aguardando n√≠vel superior)

```js
import { test, assert, sleep } from 'poku';

await test(async () => {
  const atual = 1;
  const esperado = 1;

  await sleep(2000);

  assert.strictEqual(atual, esperado);
});

await test(async () => {
  const atual = 2;
  const esperado = 2;

  await sleep(1000);

  assert.strictEqual(atual, esperado);
});
```

<hr />

### Executando testes ass√≠ncronos no mesmo arquivo sequencialmente

```js
import { describe, it, assert, sleep } from 'poku';

describe(async () => {
  await it(async () => {
    const atual = 1;
    const esperado = 1;

    await sleep(2000);

    assert.strictEqual(atual, esperado);
  });

  await it(async () => {
    const atual = 2;
    const esperado = 2;

    await sleep(1000);

    assert.strictEqual(atual, esperado);
  });
});
```

<hr />

## Aguarando todos os testes serem executados para realizar uma a√ß√£o posterior

```js
import { describe, it, assert, sleep } from 'poku';

describe(async () => {
  console.log('Imprimindo isso antes de todos os testes üèÉüèª‚Äç‚ôÄÔ∏è');

  await Promise.all([
    test(async () => {
      const atual = 1;
      const esperado = 1;

      await sleep(2000);

      assert.strictEqual(atual, esperado);
    }),

    test(async () => {
      const atual = 2;
      const esperado = 2;

      await sleep(1000);

      assert.strictEqual(atual, esperado);
    }),
  ]);

  console.log('Imprimindo isso depois de todos os testes üò¥');
});
```

:::tip
Para m√∫ltiplos `describe` ou `test` ass√≠ncronos, voc√™ tamb√©m pode usar `await` para execut√°-los sequencialmente.
:::

<hr />

:::danger Be careful
Ao usar `beforeEach` and `afterEach` ass√≠ncronos, √© necess√°rio usar `await` mesmo que os auxiliares `test` ou `it` n√£o tenham eventos ass√≠ncronos.
:::

:::note
Se voc√™ encontrar algum erro de digita√ß√£o, sinta-se √† vontade para abrir um **Pull Request** corrigindo-o.
:::

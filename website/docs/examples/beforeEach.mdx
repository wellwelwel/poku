# beforeEach and afterEach

## Basically...

By creating **Poku**, my aim is to show that testing can be simpler:

```ts
import { assert } from 'poku';

/**
 * Setup tasks traditionally done in beforeEach can be handled here if needed.
 *
 * (your direct "before" code here) 🧑🏻‍🔧
 */

assert(true, 'Running after my previous requeriments and before next ones 🚀');

/**
 * Cleanup tasks traditionally done in afterEach can be managed after assertions.
 *
 * (your direct "after" code here) 🧑🏻‍🔧
 */
```

:::info
I aim to present a new alternative that leverages native JavaScript, not to dissuade the use of current methods 🙋🏻‍♂️
:::

## A Complex Case

**Imagine these steps to perform a test:**

1. Perform **Unit Tests** Suite (_parallel_)
2. Clear and Populate the Database
3. Check for **Expected Successes Integration** Suite (_sequential_)
4. Clear and Populate the Database — again
5. Check for **Expected Failures Integration** Suite (_sequential_)

**Requirements:**

Each step requires success to be processed.

**Directory Structure:**

```bash
├── .
├── test
│ ├── unit
│ ├── integration
│ │ ├── successes
│ │ │ └── **/.spec.js
│ │ └── failures
│ │   └── **/.spec.js
│ ├─ run.test.js # The runner
│ ├─ tools.test.js
```

> Do we really need to complicate things even more by creating advanced tests runs to run our already complex tests? 😅

### Poku's Solution ✨

```ts
import { poku, assert } from 'poku';
import { recreateDatabase } from './tools.test.js';

const unitCode = await poku('test/unit', {
  parallel: true,
  noExit: true,
});

assert.strictEqual(0, unitCode, 'Running Unit Tests');

await assert.doesNotReject(
  recreateDatabase(),
  'Preparing DB for Successes Integration Tests'
);

const successesCode = await poku('test/integration/successes', {
  noExit: true,
});

assert.strictEqual(0, successesCode, 'Running Successes Integration Tests');

await assert.doesNotReject(
  recreateDatabase(),
  'Preparing DB for Successes Integration Tests'
);

const failuresCode = await poku('test/integration/failures', {
  noExit: true,
});

assert.strictEqual(0, failuresCode, 'Running Failures Integration Tests');
```

> Why comment the code if we can do it better? 🧙🏻

**Finally**

```bash
node ./test/run.test.js
```

> Or `npx tsx ./test/run.test.ts` for **TypeScript**.

<hr />

:::tip
**Poku**'s `assert` will use the message exactly as it is when using `describe` or `it`. <br />
Your **Poku** is waiting for you 🐷✨
:::

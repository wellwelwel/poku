version: '3.9'

services:
  coverage:
    container_name: 'coverage'
    image: node:lts-alpine
    working_dir: /usr/app
    volumes:
      - ${PWD}/ci:/usr/app/
      - ${PWD}/node_modules:/usr/app/node_modules/:ro
      - ${PWD}/coverage:/usr/app/coverage/
    environment:
      NODE_ENV: production
    command: npx nyc --include src --exclude src/@types --reporter=text --reporter=lcov --all node test/run.test.js
